<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>齐次变换矩阵</title>
      <link href="/2024/01/01/qi-ci-bian-huan-ju-zhen/"/>
      <url>/2024/01/01/qi-ci-bian-huan-ju-zhen/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是齐次变换矩阵"><a href="#什么是齐次变换矩阵" class="headerlink" title="什么是齐次变换矩阵"></a>什么是齐次变换矩阵</h1><h2 id="空间描述"><a href="#空间描述" class="headerlink" title="空间描述"></a>空间描述</h2><p>为了描述一个刚体在空间中的运动，我们需要表达出它的<strong>位置</strong>和<strong>姿态</strong>。</p><h3 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h3><p>在坐标系 $\left \{A \right \}$ 中，任意点可以表示成一个 $3 \times 1$ 的位置矢量</p><p>$$<br>\sideset{^A}{}P &#x3D; \begin{bmatrix}<br>p_x \\<br>p_y \\<br>p_z<br>\end{bmatrix}<br>$$</p><h3 id="姿态"><a href="#姿态" class="headerlink" title="姿态"></a>姿态</h3><p>设 $\left \{B \right \}$ 为刚体的固连系，刚体的姿态定义为 $\left \{B \right \}$ 的三个基矢量 $\hat{X} _B, \hat{Y} _B, \hat{Z} _B$ 在 $\left \{A \right \}$ 中的坐标，将这三个坐标拼成一个矩阵，</p><p>$$<br>\begin{align*}<br>\sideset{_B^A}{}R &amp;&#x3D; \begin{bmatrix}<br>\sideset{^A}{}{\hat X}_B &amp;\sideset{^A}{}{\hat Y}_B &amp;\sideset{^A}{}{\hat Z}_B<br>\end{bmatrix} \\<br>&amp;&#x3D; \begin{bmatrix}<br>{\hat X}_B \cdot {\hat X}_A &amp;{\hat Y}_B \cdot {\hat X}_A &amp;{\hat Z}_B \cdot {\hat X}_A \\<br>{\hat X}_B \cdot {\hat Y}_A &amp;{\hat Y}_B \cdot {\hat Y}_A &amp;{\hat Z}_B \cdot {\hat Y}_A \\<br>{\hat X}_B \cdot {\hat Z}_A &amp;{\hat Y}_B \cdot {\hat Z}_A &amp;{\hat Z}_B \cdot {\hat Z}_A<br>\end{bmatrix}<br>\end{align*}<br>$$</p><p>这样的 $\sideset{_B^A}{}R$ 是一个旋转矩阵（行列式为1的正交矩阵）。</p><h3 id="位姿"><a href="#位姿" class="headerlink" title="位姿"></a>位姿</h3><p>$\left \{B \right \}$ 在 $\left \{A \right \}$ 中的位姿可以用 $\left \{B \right \}$ 原点的位置矢量 $\sideset{^A}{ _{BORG}}P$ 和一个旋转矩阵 $\sideset{_B^A}{}R$ 描述</p><p>$$<br>\left \{B \right \} &#x3D; \begin{Bmatrix} \sideset{_B^A}{}R &amp;\sideset{^A}{ _{BORG}}P \end{Bmatrix}<br>$$</p><h2 id="坐标变换"><a href="#坐标变换" class="headerlink" title="坐标变换"></a>坐标变换</h2><p>空间中一个点在不同坐标系中有不同的坐标，坐标之间的变换关系取决于坐标系的相对关系。</p><h3 id="平移"><a href="#平移" class="headerlink" title="平移"></a>平移</h3><p>若 $\left \{A \right \}$ 与 $\left \{B \right \}$ 的姿态相同，对于空间中任意一点，有</p><p>$$<br>\sideset{^A}{}P &#x3D; \sideset{^B}{}P + \sideset{^A}{ _{BORG}}P<br>$$</p><h3 id="旋转"><a href="#旋转" class="headerlink" title="旋转"></a>旋转</h3><p>若 $\left \{A \right \}$ 与 $\left \{B \right \}$ 的原点相同，对于空间中任意一点，有</p><p>$$<br>\sideset{^A}{}P &#x3D; \sideset{ _B^A}{}R \sideset{^B}{}P<br>$$</p><h3 id="一般变换"><a href="#一般变换" class="headerlink" title="一般变换"></a>一般变换</h3><p>$\left \{B \right \}$ 的原点在 $\left \{A \right \}$ 中的坐标为 $\sideset{^A}{ _{BORG}}P$ ，同时 $\left \{B \right \}$ 相对 $\left \{A \right \}$ 的旋转矩阵为 $\sideset{_B^A}{}R$ ，则有</p><p>$$<br>\sideset{^A}{}P &#x3D; \sideset{ _B^A}{}R \sideset{^B}{}P + \sideset{^A}{ _{BORG}}P \tag{*}<br>$$</p><p>为了书写的简洁，定义一个 $4 \times 4$ 矩阵</p><p>$$<br>\sideset{_B^A}{}T &#x3D; \begin{bmatrix}<br>\sideset{ _B^A}{}R &amp;\sideset{^A}{ _{BORG}}P \\<br>0 &amp;1<br>\end{bmatrix}<br>$$</p><p>则(*)可改写为</p><p>$$<br>\begin{bmatrix}<br>\sideset{^A}{}P \\ 1<br>\end{bmatrix} &#x3D; \sideset{_B^A}{}T \begin{bmatrix}<br>\sideset{^B}{}P \\ 1<br>\end{bmatrix}<br>$$</p><p>进一步，用 $\sideset{^A}{}P$ 和 $\sideset{^B}{}P$ 代替 $\begin{bmatrix}\sideset{^A}{}P \\ 1\end{bmatrix}$ 和 $\begin{bmatrix}\sideset{^B}{}P \\ 1\end{bmatrix}$ ，于是(*)化为</p><p>$$<br>\sideset{^A}{}P &#x3D; \sideset{ _B^A}{}T \sideset{^B}{}P<br>$$</p><p>$\sideset{ _B^A}{}T$ 称为 $\left \{B \right \}$ 相对于 $\left \{A \right \}$ 的<strong>齐次变换矩阵</strong>，它能够完整描述一个坐标系的位姿，可以将坐标变换表示成线性变换。</p><h1 id="齐次变换矩阵的应用"><a href="#齐次变换矩阵的应用" class="headerlink" title="齐次变换矩阵的应用"></a>齐次变换矩阵的应用</h1><h2 id="在Minecraft中的应用"><a href="#在Minecraft中的应用" class="headerlink" title="在Minecraft中的应用"></a>在Minecraft中的应用</h2><p>Minecraft JAVA 1.19.4 中加入了<a href="https://zh.minecraft.wiki/w/%E5%B1%95%E7%A4%BA%E5%AE%9E%E4%BD%93">展示实体</a>，包括物品展示实体、方块展示实体和文本展示实体（以下的演示皆用方块展示实体）。展示实体要展示出来，就必须确定实体的位置和姿态（利用transformation标签）。游戏内提供了多种表示位姿的方式，如矩阵形式、轴-角度旋转、四元数旋转以及缩放等，其中矩阵形式指的就是齐次变换矩阵或者它的变体。</p><p>在不添加transformation标签的情况下，方块展示实体为默认状态。例如</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">summon</span> minecraft:block_display ~<span class="number">0</span>.<span class="number">5</span> ~<span class="number">0</span>.<span class="number">5</span> ~<span class="number">0</span>.<span class="number">5</span> &#123;block_state:&#123;Name:<span class="string">&quot;minecraft:diamond_block&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="/photos/%E9%BD%90%E6%AC%A1%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5/1.jpg" class="lazyload placeholder" data-srcset="/photos/%E9%BD%90%E6%AC%A1%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5/1.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="默认状态的方块展示实体"></p><p>我在图中建立了两个参考系 $\left \{1 \right \}$ 和 $\left \{2 \right \}$ 。其中 $\left \{1 \right \}$ 的原点在命令方块的中心，三个轴的指向是与游戏内一致的，x轴指向东，y轴竖直向上，z轴指向南。$\left \{2 \right \}$ 的姿态与 $\left \{1 \right \}$ 完全相同，但 $\left \{2 \right \}$ 的原点相对 $\left \{1 \right \}$ 有一个偏离，这由命令中的’~0.5 ~0.5 ~0.5’决定，写成位置表达式：</p><p>$$<br>\sideset{^1}{_2}P &#x3D; \begin{bmatrix}<br>0.5 \\ 0.5 \\ 0.5<br>\end{bmatrix}<br>$$</p><p>于是我们可以通过简单地设置summon的召唤位置来控制展示实体的位置，但这样难以改变它的姿态。</p><p>为了同时改变展示实体的位置和姿态，可以在命令中添加transformation标签，然后按行优先的方式输入一个齐次变换矩阵。例如</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">summon minecraft:block_display ~<span class="number">0.5</span> ~<span class="number">0.5</span> ~<span class="number">0.5</span> &#123;</span><br><span class="line">block_state:&#123;Name:<span class="string">&quot;minecraft:diamond_block&quot;</span>&#125;,</span><br><span class="line">transformation:</span><br><span class="line">[<span class="number">0.6</span>f,<span class="number">0.8</span>f,<span class="number">0</span>f,<span class="number">1</span>f,</span><br><span class="line">-<span class="number">0.8</span>f,<span class="number">0.6</span>f,<span class="number">0</span>f,<span class="number">1</span>f,</span><br><span class="line"><span class="number">0</span>f,<span class="number">0</span>f,<span class="number">1</span>f,<span class="number">0</span>f,</span><br><span class="line"><span class="number">0</span>f,<span class="number">0</span>f,<span class="number">0</span>f,<span class="number">1</span>f]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/photos/%E9%BD%90%E6%AC%A1%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5/2.jpg" class="lazyload placeholder" data-srcset="/photos/%E9%BD%90%E6%AC%A1%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5/2.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="加了transformation标签的方块展示实体"></p><p>加入transformation标签后，实体固连系就不再与 $\left \{2 \right \}$ 重合，我们将其称为 $\left \{3 \right \}$ 系。$\left \{2 \right \}$ 与 $\left \{3 \right \}$ 的关系体现为指令中的齐次变换矩阵：</p><p>$$<br>\sideset{_3^2}{}T &#x3D; \begin{bmatrix}<br>0.6 &amp;0.8 &amp;0 &amp;1 \\<br>-0.8 &amp;0.6 &amp;0 &amp;1 \\<br>0 &amp;0 &amp;1 &amp;0 \\<br>0 &amp;0 &amp;0 &amp;1<br>\end{bmatrix}<br>$$</p><p>分开来看，</p><p>$$<br>\sideset{_3^2}{}R &#x3D; \begin{bmatrix}<br>0.6 &amp;0.8 &amp;0 \\<br>-0.8 &amp;0.6 &amp;0 \\<br>0 &amp;0 &amp;1<br>\end{bmatrix}<br>\sideset{^2}{_3}P &#x3D; \begin{bmatrix}<br>1 \\ 1 \\ 0<br>\end{bmatrix}<br>$$</p><p>意味着 $\left \{3 \right \}$ 是 $\left \{2 \right \}$ 沿 $\hat{X} _2$ 方向平移1个单位，沿 $\hat{Y} _2$ 方向平移1个单位，绕着 $\hat{Z} _2$ 轴顺时针旋转53.13°的结果。</p><p>另外，指令中填写的矩阵不一定非得是标准的齐次变换矩阵。如果左上角 $3 \times 3$ 旋转矩阵部分的行列式不为1，会产生缩放效果，行列式小于0，会出现内外翻转现象（ $\left \{3 \right \}$ 变成了左手系）。如果矩阵(4,4)的位置不是1，则游戏会自动对矩阵进行整体缩放，使得 $T_{4,4}&#x3D;1$ 。</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 线性代数 </tag>
            
            <tag> Minecraft&#92; </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习笔记：角速度张量</title>
      <link href="/2023/12/02/xue-xi-bi-ji-jiao-su-du-zhang-liang/"/>
      <url>/2023/12/02/xue-xi-bi-ji-jiao-su-du-zhang-liang/</url>
      
        <content type="html"><![CDATA[<h2 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h2><p>角速度张量这个概念，在理论力学和机器人学概论课上都出现过，但两门课程上用了不同的推导方式，并得到了两个不同的结果，这使我为之困惑了一段时间。因此，我将在此对这个概念的有关内容进行梳理，还原课上的两种推导方式，并解释结果差异的原因，作为对知识的梳理和巩固。  </p><h2 id="基本假设"><a href="#基本假设" class="headerlink" title="基本假设"></a>基本假设</h2><p>假设空间中有一个绕定点转动的刚体，转动中心为 $O$ ，以 $O$ 点为坐标原点建立两个坐标系，一个是<strong>固定坐标系</strong>(Laboratory Frame)：$\left [O;\hat{\mathbf{e}}_1,\hat{\mathbf{e}}_2,\hat{\mathbf{e}}_3 \right ]$ ，另一个是<strong>刚体坐标系</strong>(Body Frame)：$\left [O;\mathbf{e}_1,\mathbf{e}_2,\mathbf{e}_3 \right ]$ 。固定坐标系是惯性系，刚体坐标系固连在刚体上。  </p><p>假设两个坐标系的基向量之间存在这样的关系式：  </p><p>$$<br>\begin{align*}<br>\begin{bmatrix}<br>\mathbf{e}_1 &amp;\mathbf{e}_2 &amp;\mathbf{e}_3<br>\end{bmatrix} &amp;&#x3D;<br>\begin{bmatrix}<br>\hat{\mathbf{e}}_1 &amp;\hat{\mathbf{e}}_2 &amp;\hat{\mathbf{e}}_3<br>\end{bmatrix} \mathbf{R}(t) \\<br>\begin{bmatrix}<br>\hat{\mathbf{e}}_1 &amp;\hat{\mathbf{e}}_2 &amp;\hat{\mathbf{e}}_3<br>\end{bmatrix} &amp;&#x3D;<br>\begin{bmatrix}<br>\mathbf{e}_1 &amp;\mathbf{e}_2 &amp;\mathbf{e}_3<br>\end{bmatrix} \mathbf{R}^T(t)<br>\end{align*}<br>$$  </p><p>$\mathbf{R}(t)$ 是与时间有关的正交矩阵，描述两个坐标系的关系，$\det(\mathbf{R}(t)) &#x3D; 1$ 。  </p><h2 id="推导方式一"><a href="#推导方式一" class="headerlink" title="推导方式一"></a>推导方式一</h2><p>用<a href="https://baike.baidu.com/item/%E7%88%B1%E5%9B%A0%E6%96%AF%E5%9D%A6%E6%B1%82%E5%92%8C%E7%BA%A6%E5%AE%9A/2477100">爱因斯坦求和约定</a>（为方便起见，本文将多次使用该约定），上式可以写作：  </p><p>$$<br>\begin{cases}<br>\mathbf{e} _i &#x3D; \mathbf{R} _{ji}\hat{\mathbf{e}} _j \\<br>\hat{\mathbf{e}} _j &#x3D; \mathbf{R} _{jk}\mathbf{e} _k<br>\end{cases}<br>$$  </p><p>假设刚体上有一点 $P$ ，它的向径为 $\mathbf r$ 。需要注意的是，物理学中的矢量是一个独立于坐标系的、客观存在的量，在不同坐标系下有不同的坐标。  </p><p>设 $\mathbf r$ 在刚体坐标系中的坐标为 $\begin{bmatrix} x_1 \\ x_2 \\ x_3 \end{bmatrix}$ ，那么 $\mathbf r &#x3D; x_i \mathbf{e}_i$ 。  </p><p>设 $P$ 在固定坐标系中的速度为 $\mathbf{v}_P$ ，则有  </p><p>$$<br>\begin{align*}<br>\mathbf{v} _P &amp;&#x3D; \frac{\mathrm{d} \mathbf{r}}{\mathrm{d} t} \\<br>&amp;&#x3D; x_i \frac{\mathrm{d} \mathbf{e} _i}{\mathrm{d} t} \\<br>&amp;&#x3D; x_i \frac{\mathrm{d} \mathbf{R} _{ji}}{\mathrm{d} t} \hat{\mathbf{e}} _j \\<br>&amp;&#x3D; x_i \frac{\mathrm{d} \mathbf{R} _{ji}}{\mathrm{d} t} \mathbf{R} _{jk} \mathbf{e} _k \\<br>&amp;&#x3D; x_i(\dot{\mathbf{R}}^T \mathbf{R}) _{ik} \mathbf{e} _k \\<br>&amp;&#x3D; x_i (\mathbf{R}^T\dot{\mathbf{R}}) _{ki} \mathbf{e} _k<br>\end{align*}<br>$$  </p><p>事实上，$\mathbf{R}^T \dot{\mathbf{R}}$ 是一个反对称矩阵。</p><details ><summary pointer> 证明过程 </summary>              <div class='content'>              <p>$$<br>\begin{align*}<br>\mathbf{R}^T\mathbf{R} &amp;&#x3D; \mathbf{I} \\<br>\frac{\mathrm{d}}{\mathrm{d}t} (\mathbf{R}^T\mathbf{R}) &amp;&#x3D; \mathbf{0} \\<br>\dot{\mathbf{R}}^T\mathbf{R} + \mathbf{R}^T\dot{\mathbf{R}} &amp;&#x3D; \mathbf{0} \\<br>(\mathbf{R}^T\dot{\mathbf{R}})^T + \mathbf{R}^T\dot{\mathbf{R}} &amp;&#x3D; \mathbf 0<br>\end{align*}<br>$$</p>              </div>            </details><p>定义 $\mathbf S &#x3D; \mathbf{R}^T\dot{\mathbf{R}} &#x3D; \begin{bmatrix} 0 &amp;-\Omega_3 &amp;\Omega_2 \\ \Omega_3 &amp;0 &amp;-\Omega_1 \\ -\Omega_2 &amp;\Omega_1 &amp;0 \end{bmatrix}$ ，张量 $\overset{\rightrightarrows}{\mathbf S} &#x3D; \mathbf{S}_{ij}\mathbf{e}_i\mathbf{e}_j$</p><details ><summary pointer> 张量的运算法则 </summary>              <div class='content'>              <p>$$<br>\begin{align*}<br>\overset{\rightrightarrows}{\mathbf S} \cdot \mathbf{r} &amp;&#x3D; \mathbf{S}_{ij}\mathbf{e}_i\mathbf{e}_j \cdot (x_k \mathbf{e} _k) \\<br>&amp;&#x3D; \mathbf{S} _{ij}x_k\mathbf{e}_i(\mathbf{e} _j \cdot \mathbf{e} _k) \\<br>&amp;&#x3D; \mathbf{S} _{ij}x_k \delta _{jk} \mathbf{e} _i \\<br>&amp;&#x3D; \mathbf{S} _{ij}x_j\mathbf{e}_i<br>\end{align*}<br>$$<br>其中 $\delta$ 是<a href="https://zh.wikipedia.org/wiki/%E5%85%8B%E7%BD%97%E5%86%85%E5%85%8B%CE%B4%E5%87%BD%E6%95%B0">克罗内克(Kronecker)函数</a></p>              </div>            </details><p>则 $\mathbf{v} _P &#x3D; \mathbf{S} _{ki} x_i \mathbf{e}_k &#x3D; \overset{\rightrightarrows}{\mathbf S} \cdot \mathbf{r}$  </p><p>若用<a href="https://baike.baidu.com/item/%E5%88%97%E7%BB%B4-%E5%A5%87%E7%BB%B4%E5%A1%94%E7%AC%A6%E5%8F%B7/22362732">Levi-Civita符号</a>表示，$S_{ij} &#x3D; - \epsilon _{ijk}\Omega _k$ ，$\mathbf{v} _P &#x3D; -\epsilon _{kij} \Omega _j x_i \mathbf{e} _k &#x3D; \begin{bmatrix} \Omega _1 \\ \Omega _2 \\ \Omega _3 \end{bmatrix} \times \mathbf{r}$  </p><p>也就是说，我们得到了刚体的角速度张量 $\overset{\rightrightarrows}{\mathbf S}$ ，它在<strong>刚体坐标系</strong>中的表达为 $\mathbf S &#x3D; \mathbf{R}^T\dot{\mathbf{R}} &#x3D; \begin{bmatrix} 0 &amp;-\Omega_3 &amp;\Omega_2 \\ \Omega_3 &amp;0 &amp;-\Omega_1 \\ -\Omega_2 &amp;\Omega_1 &amp;0 \end{bmatrix}$ ，而 $\begin{bmatrix} \Omega _1 \\ \Omega _2 \\ \Omega _3 \end{bmatrix}$ 是其对应的角速度矢量在<strong>刚体坐标系</strong>中的坐标。  </p><h2 id="推导方式二"><a href="#推导方式二" class="headerlink" title="推导方式二"></a>推导方式二</h2><p>如果直接对 $\mathbf R$ 求导，根据导数的定义，有</p><p>$$<br>\dot{\mathbf{R}} &#x3D; \lim _{\Delta t \to 0} \frac{\mathbf{R}(t+\Delta t) - \mathbf{R}(t)}{\Delta t}<br>$$</p><p>假设 $t$ 时刻刚体的瞬时转轴为 $K$ ，$\Delta t$时间内转过的角度为 $\Delta \theta$ ，记 $\mathbf{R} _K (\Delta \theta)$ 是<strong>固定坐标系</strong>中绕 $K$ 轴旋转 $\Delta \theta$ 对应的旋转矩阵。  </p><p>于是</p><p>$$<br>\mathbf{R}(t+\Delta t) &#x3D; \mathbf{R} _K (\Delta \theta) \mathbf{R} (t)<br>$$</p><p>所以</p><p>$$<br>\begin{align*}<br>\dot{\mathbf{R}} &amp;&#x3D; \lim _{\Delta t \to 0} \left( \frac{\mathbf{R} _K(\Delta \theta) - \mathbf{I} _3}{\Delta t} \mathbf{R}(t) \right) \\<br>&amp;&#x3D; \left( \lim _{\Delta t \to 0}\frac{\mathbf{R} _K(\Delta \theta) - \mathbf{I} _3}{\Delta t} \right) \mathbf{R}(t)<br>\end{align*}<br>$$</p><p>接下来的推导中，我们要先知道 $\mathbf{R} _K (\theta)$ 的表达式，我在这里不作证明，直接引用：</p><p>$$<br>\mathbf{R} _K(\theta) &#x3D; \begin{bmatrix}<br>k_1^2(1-\cos\theta)+\cos\theta &amp;k_1k_2(1-\cos\theta)-k_3\sin\theta &amp;k_1k_3(1-\cos\theta)+k_2\sin\theta \\<br>k_1k_2(1-\cos\theta)+k_3\sin\theta &amp;k_2^2(1-\cos\theta)+\cos\theta &amp;k_2k_3(1-\cos\theta)-k_1\sin\theta \\<br>k_1k_3(1-\cos\theta)-k_2\sin\theta &amp;k_2k_3(1-\cos\theta)+k_1\sin\theta &amp;k_3^2(1-\cos\theta)+\cos\theta<br>\end{bmatrix}<br>$$</p><p>$$<br>\mathbf{k} &#x3D; \begin{bmatrix}\hat{\mathbf e} _1 &amp;\hat{\mathbf e} _2 &amp;\hat{\mathbf e} _3 \end{bmatrix} \begin{bmatrix} k_1 \\ k_2 \\ k_3 \end{bmatrix} 是转轴K方向的单位向量<br>$$</p><p>代入 $\theta &#x3D; \Delta \theta$ ，并保留一阶小量，得</p><p>$$<br>\mathbf{R} _k(\Delta \theta) &#x3D; \begin{bmatrix}<br>1 &amp;-k_3\Delta \theta &amp;k_2\Delta \theta \\<br>k_3\Delta \theta &amp;1 &amp;-k_1\Delta \theta \\<br>-k_2\Delta \theta &amp;k_1\Delta \theta &amp;1<br>\end{bmatrix}<br>$$</p><p>于是</p><p>$$<br>\dot{\mathbf{R}} &#x3D; \lim _{\Delta t \to 0} \frac{\begin{bmatrix}<br>0 &amp;-k_3\Delta \theta &amp;k_2\Delta \theta \\<br>k_3\Delta \theta &amp;0 &amp;-k_1\Delta \theta \\<br>-k_2\Delta \theta &amp;k_1\Delta \theta &amp;0<br>\end{bmatrix}}{\Delta t} \mathbf{R}(t)<br>$$</p><p>设 $\Omega _i &#x3D; k _i \lim _{\Delta t \to 0} \frac{\Delta \theta}{\Delta t}$  </p><p>则<br>$$<br>\dot{\mathbf{R}} &#x3D; \begin{bmatrix}<br>0 &amp;-\Omega _3 &amp;\Omega _2 \\<br>\Omega _3 &amp;0 &amp;-\Omega _1 \\<br>-\Omega _2 &amp;\Omega _1 &amp;0<br>\end{bmatrix} \mathbf{R}(t)<br>$$</p><p>两边同时右乘 $\mathbf{R}^T(t)$ ，得</p><p>$$<br>\mathbf{S} &#x3D; \dot{\mathbf{R}}\mathbf{R}^T &#x3D; \begin{bmatrix}<br>0 &amp;-\Omega _3 &amp;\Omega _2 \\<br>\Omega _3 &amp;0 &amp;-\Omega _1 \\<br>-\Omega _2 &amp;\Omega _1 &amp;0<br>\end{bmatrix}<br>$$</p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>至此，我们已经通过两种不同方式得到了角速度的反对称矩阵表达式。但眼尖的我发现，一个是 $\mathbf{S} &#x3D; \mathbf{R}^T\dot{\mathbf{R}}$ ，另一个是 $\mathbf{S} &#x3D; \dot{\mathbf{R}}\mathbf{R}^T$ ，两个 $\mathbf{S}$ 居然是不同的！问题究竟出在何处？</p><h2 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h2><p>你可能已经注意到，我在行文过程中将所有的<strong>坐标系</strong>都加粗了。没错，问题就出在坐标系的选取上。为了区分，我将前后得到的两个 $\mathbf S$ 标记为 $\mathbf S _1$ 和 $\mathbf S _2$ ，其中 $\mathbf S _1 &#x3D; \mathbf{R}^T\dot{\mathbf{R}}$ ，$\mathbf S _2 &#x3D; \dot{\mathbf{R}}\mathbf{R}^T$。  </p><p>$\mathbf S _1$ 在文中已经强调过，它是角速度张量在<strong>刚体坐标系</strong>下的表达。在推导 $\mathbf S _2$ 的过程中，我们用到的 $\mathbf k$ 选取的是<strong>固定坐标系</strong>中的坐标，因此 $\mathbf S _2$ 自然就是同一个角速度张量在<strong>固定坐标系</strong>下的表达。根据同一个张量在不同坐标系下的矩阵满足相似关系：$\mathbf S _2 &#x3D; \mathbf R \mathbf S _1 \mathbf R^T$ ，将 $\mathbf S _1 &#x3D; \mathbf{R}^T\dot{\mathbf{R}}$ 和 $\mathbf S _2 &#x3D; \dot{\mathbf{R}}\mathbf{R}^T$ 代入，发现等式恰好成立。  </p><p>因此，这两种推导方式得到的角速度张量其实是一致的，形式上的区别仅仅来源于坐标系的不同，至此问题得以解决。</p>]]></content>
      
      
      <categories>
          
          <category> 力学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公式 </tag>
            
            <tag> 线性代数 </tag>
            
            <tag> 机器人学 </tag>
            
            <tag> 理论力学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对正交矩阵凯莱公式的讨论</title>
      <link href="/2023/11/25/dui-zheng-jiao-ju-zhen-kai-lai-gong-shi-de-tao-lun/"/>
      <url>/2023/11/25/dui-zheng-jiao-ju-zhen-kai-lai-gong-shi-de-tao-lun/</url>
      
        <content type="html"><![CDATA[<h1 id="正交矩阵的凯莱公式表述"><a href="#正交矩阵的凯莱公式表述" class="headerlink" title="正交矩阵的凯莱公式表述"></a>正交矩阵的凯莱公式表述</h1><blockquote><p>设 $R$ 是n维线性空间的方阵，若 $R$ 是不以 $-1$ 为特征值的正交矩阵，则存在反对称矩阵 $S$ ，使得<br>$$ R &#x3D; (I-S)^{-1}(I+S) $$</p></blockquote><hr><h4 id="证明思路"><a href="#证明思路" class="headerlink" title="证明思路"></a>证明思路</h4><p>不妨从凯莱公式中反解<strong>S</strong>：</p><p>$$<br>\begin{align*}<br>R &amp;&#x3D; (I-S)^{-1}(I+S) \\<br>(I-S)R &amp;&#x3D; I+S \\<br>R-SR &amp;&#x3D; I+S \\<br>R-I &amp;&#x3D; S(R+I) \\<br>S &amp;&#x3D; (R-I)(R+I)^{-1}<br>\end{align*}<br>$$</p><p>因此，想要根据 $S&#x3D;(R-I)(R+I)^{-1}$ 构造出 $S$，从而证明凯莱公式，只需证明以下三点：</p><ol><li>$R+I$ 是可逆矩阵</li><li>$S$ 是反对称矩阵</li><li>$I-S$ 是可逆矩阵</li></ol><hr><h4 id="证明过程"><a href="#证明过程" class="headerlink" title="证明过程"></a>证明过程</h4><ol><li><p>若 $-1$ 不是 $R$ 的特征值，则 $-1$ 不是特征多项式 $det(R- \lambda I)&#x3D;0$ 的根，即 $det(R+I) \neq 0$ ，所以 $R+I$ 是可逆矩阵。</p></li><li><p>已知 $S&#x3D;(R-I)(R+I)^{-1}$ ，则</p><p> $$<br> \begin{align*}<br> S^T &amp;&#x3D; ((R+I)^{-1})^T(R-I)^T \\<br> &amp;&#x3D; ((R+I)^T)^{-1}(R^T-I) \\<br> &amp;&#x3D; (R^T+I)^{-1}(R^T-I)<br> \end{align*}<br> $$</p><p> 由于</p><p> $$<br> (R^T+I)(R-I)&#x3D;R-R^T \\<br> (R^T-I)(R+I)&#x3D;R^T-R<br> $$</p><p> 所以</p><p> $$<br> \begin{align*}<br> S+S^T &amp;&#x3D; (R-I)(R+I)^{-1}+(R^T+I)^{-1}(R^T-I) \\<br> &amp;&#x3D; (R^T+I)^{-1} \left[ (R^T+I)(R-I)+(R^T-I)(R+I) \right] (R+I)^{-1} \\<br> &amp;&#x3D; (R^T+I)^{-1} \left[ (R-R^T)+(R^T-R) \right] (R+I)^{-1} \\<br> &amp;&#x3D; 0<br> \end{align*}<br> $$</p><p> 由此我们证明了 $S$ 是反对称矩阵。</p></li><li><p>设 $x$ 是一个n维向量，满足 $(I-S)x&#x3D;0$ ，则有</p></li></ol><p>$$<br>\begin{align*}<br>Sx &amp;&#x3D; x \\<br>x^TS^T &amp;&#x3D; x^T \\<br>x^TS^Tx &amp;&#x3D; x^Tx \\<br>-x^TSx &amp;&#x3D; x^Tx \\<br>-x^Tx &amp;&#x3D; x^Tx \\<br>x^Tx &amp;&#x3D; 0<br>\end{align*}<br>$$</p><p>当且仅当 $x&#x3D;0$ 时满足上式。<br>因此 $I-S$ 是可逆矩阵。  </p><ul><li>总结一下，任意给一个不以 $-1$ 为特征值的方阵 $R$ ，我们都能找到反对称矩阵 $S&#x3D;(R-I)(R+I)^{-1}$ ，使得 $ R &#x3D; (I-S)^{-1}(I+S) $ ，因此凯莱公式成立。</li></ul><hr><h4 id="进一步讨论"><a href="#进一步讨论" class="headerlink" title="进一步讨论"></a>进一步讨论</h4><p>如果 $R$ 是一个 $3×3$ 的矩阵，那么公式中的 $S$ 是一个 $3×3$ 的反对称矩阵，可以写成如下形式：</p><p>$$<br>S&#x3D;\begin{bmatrix}<br>0  &amp;-s_3  &amp;s_2 \\<br>s_3  &amp;0  &amp;-s_1 \\<br>-s_2  &amp;s_1  &amp;0<br>\end{bmatrix}<br>$$</p><p>或者用<a href="https://baike.baidu.com/item/%E7%88%B1%E5%9B%A0%E6%96%AF%E5%9D%A6%E6%B1%82%E5%92%8C%E7%BA%A6%E5%AE%9A/2477100">爱因斯坦求和约定</a>来表示：</p><p>$$<br>S_{ij} &#x3D; - \epsilon _{ijk}s_k<br>$$</p><p>其中 $\epsilon$ 是 <strong>Levi-Civita</strong> 符号，该符号定义为</p><p>$$<br>\epsilon_{ijk}&#x3D;<br>\begin{cases}<br>1 &amp;\text{i,j,k 是偶排列的} \\<br>-1 &amp;\text{i,j,k 是奇排列的} \\<br>0 &amp;\text{i,j,k 中有重复的} \\<br>\end{cases}<br>$$</p><p>从中可以看出 $S$ 具有三个自由度，所以 $R$ 也具有三个自由度。  </p><p>如果用 $S$ 表示出 $R$，可以得到</p><p>$$<br>R&#x3D; \frac{1}{s_1^2+s_2^2+s_3^2+1}<br>\begin{bmatrix}<br>s_1^2-s_2^2-s_3^2+1 &amp;2s_1s_2-2s_3 &amp;2s_1s_3+2s_2 \\<br>2s_1s_2+2s_3 &amp;-s_1^2+s_2^2-s_3^2+1 &amp;2s_2s_3-2s_1 \\<br>2s_1s_3-2s_2 &amp;2s_2s_3+2s_1 &amp;-s_1^2-s_2^2+s_3^2+1<br>\end{bmatrix}<br>$$</p><p>记向量 $\vec{s}&#x3D;\begin{bmatrix}s_1 \\ s_2 \\ s_3 \end{bmatrix}$ ，$\vec{s}$ 的 $l_2$ 范数为 $k&#x3D;\sqrt{s_1^2+s_2^2+s_3^2}$  </p><p>设存在一个角度 $\theta \in \left[0,\pi \right]$ ，$\tan\frac{\theta}{2}&#x3D;k$，并且当$k \to \infty$ 时 $\theta &#x3D; \pi$  </p><p>于是 $\sin\theta&#x3D;\frac{2k}{1+k^2}$， $\cos\theta&#x3D;\frac{1-k^2}{1+k^2}$  </p><p>将 $\vec{s}$ 归一化，令 $\vec{t}&#x3D;\frac{\vec{s}}{k}$ ，$t_i&#x3D;\frac{s_i}{k}(i&#x3D;1,2,3)$ ，于是我们可以用 $t_i$ 和 $\theta$ 来表示 $R$ ：</p><p>$$<br>R&#x3D;\begin{bmatrix}<br>t_1^2(1-\cos\theta)+\cos\theta &amp;t_1t_2(1-\cos\theta)-t_3\sin\theta &amp;t_1t_3(1-\cos\theta)+t_2\sin\theta \\<br>t_1t_2(1-\cos\theta)+t_3\sin\theta &amp;t_2^2(1-\cos\theta)+\cos\theta &amp;t_2t_3(1-\cos\theta)-t_1\sin\theta \\<br>t_1t_3(1-\cos\theta)-t_2\sin\theta &amp;t_2t_3(1-\cos\theta)+t_1\sin\theta &amp;t_3^2(1-\cos\theta)+\cos\theta<br>\end{bmatrix}<br>$$</p><p>如果你对这样的矩阵形式熟悉的话，你会发现这恰好是绕单位向量 $\vec{t}$ 旋转 $\theta$ 角度对应的旋转矩阵。而 $\vec{t}$ 的方向与 $\vec{s}$ 相同，$\theta$ 的大小与 $\vec{s}$ 的模正相关， $\vec{s}$ 又和 $S$ 一一对应。由此我们也可以发现，在三维空间下，任意一个正交矩阵 $R$ ，如果 $-1$ 不是它的特征值，它就是一个纯粹的旋转矩阵，没有镜像的效果，那么它一定有一个确定的旋转轴和旋转角度，因此能够找到唯一的一个反对称阵 $S$ 与之对应。</p>]]></content>
      
      
      <categories>
          
          <category> 数学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 线性代数 </tag>
            
            <tag> 定理 </tag>
            
            <tag> 证明 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
